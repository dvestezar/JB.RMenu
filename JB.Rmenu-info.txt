right click menu
JB (c)2014

require
	JB lib
	jQuery

fn
	- private create(params)	: vytvoøí DOM menu je voláno pøi inicializaci, následná volání nemají efekt
		je voláno pøi vytváøení objektu !!!!
		vytvoøí menu a vrátí jej jako element
		p=parametry
			.title	= pokud je zadán, tak bude vytvoøen nadpis tabulky
			.id		= pokud je zadáno tak bude pøiøazeno elementu menu toto ID
			.icos	= objekt ikon, pokud není zadáno je použito default pole v 'JB.Rmenu.default_icons'
						{'ico_name1':'ico_url1','ico_name2':'ico_url2',....}
					pokud je icosadd zadáno tak je toto ignorováno
			.icosadd= jakopøedchozí ale tento objekt je pøidán k default ikonám a použito, icos je ognorováno
			
		vrací odkaz na hlavní DIV elemet menu
	
	- private make_item(el,fcsN,ico)
		vytvoøí item v menu a pøipojí jej k el
			el = objekt ve kterém je vytvoøen øádek
			fcsN = název classname øádku
			ico = název ikony z objektu ikon
				pokud nezadáno, null, nebo '' tak není vytvoøena
		
			vrací objekt
				.main = je hlavní div	csn= csN (JBMenuItemSub / JBMenuItem)
				.ico = je div icony		csn= JBMenuItemIco
				.tx = span textu		csn= JBMenuItemTx   obálka spanu DI má class JBMenuItemTxDiv
				.sp = div mezery		csn= JBMenuItemSp
				.img = pokud je zadána ikona a existuje v poli, tak obsahuje element img v divu ico
			
			'div sub' existuje jen pokud se jedná odkaz na podmenu a potom má csn 'JBMenuItemSubPoint'
					tento div je pøidán až následnì v rutine add
			
			|div main ----------------------------------------|
			| |div ico--||div tx-------||div sp--||div sub--| |
			|-------------------------------------------------|	
	
	- show(x,y)		: zobrazí vytvoøené menu na daných souøadnicích
			x=pozice z leva v pixelech relativnì od levého horního rohu stránky
			y=pozice z vrchu pixelech relativnì od levého horního rohu stránky
			
	- showByEvent(e) : jako pøedchozí ale parametr je jen jeden a to event myši, ze kterého si souøadnice veme
			jen pomocná pro následující funkce
			'e' je event myši
	- hide()
		skrytí menu pomocí jQuery 200ms
	
	- add		: pøidá položku do menu
		funkce pøidá øádek do menu
		p = parametry pro všechny typy
			p.csN = pokud zadáno tak je ke classname DIV elementu JBMenuItem pøidán tento text
			p.typ = - když nezadáno tak normální øádek odkaz/funkce
					- když = 'split' tak bude vytvoøen øádek oddìlovaè s classname "JBMenuItemSplit"
					- když = 'sub' tak bude vytvoøeno submenu s classname "JBMenuItemSub"
							v tomto øádku je také vytvoøena DIV s class 'JBMenuItemSubPoint' kde je zobrazena šipka na submenu
			p.width = (integer) pokud není zadáno tak není použito, jinak šíøka menu v px
					
			'p' parametry pro default typ
				p.tx = text øádku
				p.url = pokud string tak URL, pokud objekt tak funkce a není brán v potaz target 
				p.target = funkce jako u html linku
				p.ico = název ikony z pole ikon pøi vytváøení menu

			'p' parametry pro 'sub' typ
				p.tx = text øádku
				p.wait = (integer) default 0, 0 okamžité zobrazení submenu, jinak èas zpoždìní zobrazení v ms
				p.p = parametry pro submenu jako u funkce create
				p.ico = název ikony z pole ikon pøi vytváøení menu
				
			'p' parametry pro 'split' typ
				nemá parametry
			
		vrací odkaz na vytvoøený element
		
	- title		: nastaví titulek menu
			nastaví title menu
			pokud je tx null tak skryje DIV title

	- clear		: smaže všechny položky v menu i svázaná podmenu
			
	
	použití
	
	var menu=new JB.Rmenu(parmas) params viz funkce create
	
	fe funkci myši oncontextmenu=function(event){	
		with(menu.toto){
			clear(); // kompletnì promaž
			title('Menu souboru'); //nastav titulek
			
			//pøidej pár položek
			add({tx:'Náhled',ico:'search',url:function(){alert('ok')}}); // po kliknutí volá funkci
			add({tx:'Tisk',ico:'print'}); // po kliknutí volá url ''
			add({tx:'Ulož',ico:'save'});
			add({typ:'split'});
			var x=add({tx:'Editace',typ:'sub',ico:'pen'}); //vytvoø submenu
			add({tx:'Smaž',ico:'del'});
			
			// pøidej položky submenu
			with(x.JBsubmenu.toto){
				add({tx:'Zrušit skryté na servis.krakens.cz',ico:'eye'});
				add({tx:'Skrýt na servis.krakens.cz',ico:'eye_dis'});
				add({tx:'Zobraz vykøièník',ico:'war'});
				add({tx:'Skryj vykøièník',ico:'war'});
			}
			
			// zobraz pøes event myši
			showByEvent(event);
		}
	}